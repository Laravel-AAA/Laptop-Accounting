import{r as o,j as e}from"./app-dd313135.js";import{S as u}from"./SecondaryButton-16255ccf.js";import{T as x}from"./TemplateModal-0b1aa5e7.js";import{P as h}from"./PrimaryButton-83bf4880.js";import{C as p}from"./Checkbox-1fe8915b.js";import{I as b}from"./InputError-31469ee7.js";import{I as g}from"./InputHint-9eaf2a43.js";import{I as j}from"./InputLabel-87739410.js";import{T as v}from"./TextInput-d72e27c0.js";import f from"./TotalInfo-74d26125.js";import{N}from"./Num-dabff9b6.js";import"./DangerButton-ad406bde.js";import"./transition-9da6ec54.js";function y({form:t,taxPercent:i}){const[s,n]=o.useState(!1),[m,l]=o.useState(0);function d(){return t.data.transactions.reduce((r,a)=>(a.product.price??0)*a.quantity+r,0)}function c(){return d()*(1+i)}return o.useEffect(()=>{t.setData("cashReceived",Number(c().toFixed(2)))},[]),e.jsxs(e.Fragment,{children:[e.jsx(f,{bill:t.data,taxPercent:i}),e.jsxs("div",{className:"mt-3 w-full",children:[e.jsx(j,{htmlFor:"cashReceived",value:"Cash Received"}),e.jsx(v,{id:"cashReceived",name:"cashReceived",type:"number",value:t.data.cashReceived??0,className:"mt-1 block w-full text-xl",inputMode:"numeric",isFocused:!0,isSelect:!0,onClick:r=>r.currentTarget.select(),disabled:t.processing||s,onChange:r=>{const a=Number(r.target.value);t.setData("cashReceived",a),l(Number(Number((a??0)-c()).toFixed(2)))}}),e.jsx(b,{message:t.errors.cashReceived,className:"mt-2"}),e.jsx(g,{message:e.jsxs("p",{style:{visibility:s?"hidden":"visible"},className:"ml-2 mt-1 text-lg text-gray-800",children:["Remaining:Â ",e.jsx(N,{currency:"$",className:"text-primary-800",amount:m})]})}),e.jsxs("label",{className:"ml-2 mt-2 flex items-center",children:[e.jsx(p,{name:"isDigitalPayment",className:"h-5 w-5",checked:s,disabled:t.processing,onChange:r=>{n(a=>(s?(t.setData("cashReceived",Number(c().toFixed(2))),l(0)):(t.setData("cashReceived",""),l(Number(Number(-c()+(t.data.cashReceived??0)).toFixed(2)))),!a))}}),e.jsx("span",{className:"ml-2 text-lg text-gray-600",children:"Digital payment"})]})]})]})}function C({form:t,isShow:i,requestClose:s,taxPercent:n}){function m(l){l.preventDefault(),t.post(route("bill.store"),{onSuccess:()=>{s(),t.clearErrors(),t.reset()}})}return e.jsx(x,{title:"Checkout",open:i,closeModal:()=>s(),children:e.jsxs("form",{className:"mt-3",onSubmit:m,children:[e.jsx(y,{form:t,taxPercent:n}),e.jsxs("div",{className:"mt-4 flex flex-col gap-4 sm:flex-row-reverse",children:[e.jsx(h,{type:"submit",disabled:t.processing,children:"Checkout"}),e.jsx(u,{type:"button",onClick:()=>{t.cancel(),s(),t.clearErrors()},children:"Cancel"})]})]})})}function H({form:t,taxPercent:i}){const[s,n]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pointer-events-none absolute bottom-[50px] h-5 w-full bg-gradient-to-t from-white to-transparent opacity-90"}),e.jsx("div",{className:"absolute bottom-0 w-full",children:e.jsx(u,{style:{fontSize:"1.2rem",fontWeight:800},className:"bottom-0  h-[50px] w-full min-w-full rounded-none",disabled:t.processing,onClick:()=>n(!0),children:"Checkout"})}),e.jsx(C,{isShow:s,requestClose:()=>n(!1),form:t,taxPercent:i})]})}export{H as default};
