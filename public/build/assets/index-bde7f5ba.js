import{j as e,r as h,W as N,b as y}from"./app-f8210ef9.js";import{A as w}from"./index-5d79f9ff.js";import C from"./Product-592b37d4.js";import{P as k}from"./Pagination-15d9a5cb.js";import{e as I,B as F}from"./index.esm-db1307ea.js";import{I as u}from"./InputError-8ae0324d.js";import{I as m}from"./InputLabel-4d9e57e7.js";import{T as p}from"./TextInput-5feff15c.js";import{D as j}from"./DangerButton-c23e06f6.js";import{P as f}from"./PrimaryButton-5e54606a.js";import{S as P}from"./SecondaryButton-41d406ec.js";import{D as S}from"./ProductOptions-8f0fb58a.js";import{T as D}from"./index-3e1c4d6b.js";import B from"./InventoryHeader-dba96dff.js";import"./Dropdown-10c14537.js";import"./transition-94229a44.js";import"./Num-697549e9.js";import"./index.esm-08fed661.js";import"./iconBase-4ce4d0a2.js";import"./index-387d7a00.js";function b({type:t="button",className:a="",disabled:s,children:r,...n}){return e.jsx("button",{...n,type:t,className:`inline-block cursor-pointer items-center rounded-md border
        border-transparent bg-indigo-700 px-4
        py-2 text-center  text-xs font-semibold
        uppercase tracking-widest
        text-white transition duration-200 
        ease-in-out hover:bg-indigo-600 focus:outline-none focus:ring-2  focus:ring-indigo-300
        focus:ring-offset-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-300
        focus-visible:ring-offset-2 active:scale-95
         disabled:opacity-25 disabled:active:scale-100 ${s&&"opacity-25"} `+a,disabled:s,children:r})}function E({message:t,className:a="",...s}){return t?e.jsx("p",{...s,className:"text-sm text-gray-600 "+a,children:t}):null}function T({formProps:t,modalAction:a}){const s=a.state,r=t.data.img,[n,i]=h.useState(()=>"default"),o=e.jsx("div",{className:"mt-1  rounded-md border border-gray-300",children:e.jsx("img",{className:"mx-auto h-40",src:r!=null&&r.startsWith("http")?r:"products-images/"+r,alt:"Image "+(r??"")+" of product "+t.data.name})}),c=e.jsxs(e.Fragment,{children:[e.jsx(p,{id:"img",type:"file",name:"img",className:"mt-1 block w-full",hidden:r,disabled:s=="show",onChange:x=>{var l;t.setData("imageFile",(l=x.target.files)==null?void 0:l[0])}}),t.progress&&e.jsx("div",{className:"my-1 h-2.5 w-full rounded-md bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{style:{width:t.progress+"%"},className:"h-2.5 rounded-md bg-green-600 dark:bg-green-500"})}),e.jsx(u,{message:t.errors.img||t.errors.imageFile,className:"mt-2"}),e.jsx(E,{message:"We recommend an image with white background",className:"mt-2"})]}),d=e.jsx(I,{className:"mx-auto mt-4 h-24 w-24 text-primary-700"});function g(){return s=="create"?c:s=="show"?r==null?d:o:r==null?c:n=="default"?e.jsxs(e.Fragment,{children:[o,e.jsxs("div",{className:"mb-4 mt-1 flex justify-center gap-8",children:[e.jsx(b,{onClick:()=>{i("change")},children:"Change Image"}),e.jsx(j,{onClick:()=>{i("removed"),t.setData("img",null)},children:"Remove Image"})]})]}):c}return e.jsxs(e.Fragment,{children:[e.jsx(m,{htmlFor:"img",value:(r==null&&s=="edit"||n=="removed"||s=="create"?"Choose ":n=="change"?"Change ":"")+"Image"}),g()]})}function q({formProps:t,modalAction:a}){return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(m,{htmlFor:"name",value:"Product Name"}),e.jsx(p,{id:"name",name:"name",value:t.data.name,className:"mt-1 block w-full",autoComplete:"name",isFocused:!0,disabled:a.state=="show",onChange:s=>t.setData("name",s.target.value),required:!0}),e.jsx(u,{message:t.errors.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"price",value:"Price"}),e.jsx(p,{id:"price",type:"number",inputMode:"decimal",name:"price",value:t.data.price,className:"mt-1 block w-full",disabled:a.state=="show",onChange:s=>t.setData("price",Number(s.target.value))}),e.jsx(u,{message:t.errors.price,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"stock",value:"Stock"}),e.jsx(p,{id:"stock",type:"number",inputMode:"numeric",name:"stock",value:t.data.stock,className:"mt-1 block w-full",disabled:a.state=="show",onChange:s=>t.setData("stock",Number(s.target.value))}),e.jsx(u,{message:t.errors.stock,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{htmlFor:"barcode",value:"Barcode"}),e.jsx(p,{id:"barcode",type:"number",inputMode:"numeric",name:"barcode",value:t.data.barcode,className:"mt-1 block w-full remove-arrow",disabled:a.state=="show",onChange:s=>t.setData("barcode",s.target.value)}),e.jsx(u,{message:t.errors.barcode,className:"mt-2"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(T,{formProps:t,modalAction:a})})]})}function M({modalAction:t,setModalAction:a,formProps:s}){const[r,n]=h.useState(!1),i=e.jsx(b,{type:"button",onClick:()=>{a(l=>({data:l.data,open:!0,state:"edit"}))},disabled:s.processing,children:"Edit"}),o=e.jsx(j,{disabled:s.processing,onClick:()=>n(!0),children:"Delete"}),c=e.jsx(f,{type:"submit",disabled:s.processing,children:"Create"}),d=e.jsx(P,{type:"button",onClick:()=>{s.cancel(),a(l=>({...l,open:!1})),s.reset(),s.clearErrors()},children:"Cancel"}),g=e.jsx(f,{type:"submit",disabled:s.processing,children:"Save"});function x(){return t.state=="create"?e.jsxs(e.Fragment,{children:[c," ",d]}):t.state=="edit"?e.jsxs(e.Fragment,{children:[g," ",d]}):e.jsxs(e.Fragment,{children:[i," ",o," ",d]})}return e.jsxs("div",{className:"mt-4 flex flex-col gap-4 sm:flex-row-reverse",children:[x(),e.jsx(S,{isOpen:r,requestClose:l=>{n(!1),l&&l.toLowerCase().trim()=="delete"&&a(v=>({...v,open:!1}))},product:s.data})]})}function R({modalAction:t,setModalAction:a}){const s=N(t.data?t.data.id.toString()+t.data.img:t.state,t.state=="create"?{name:""}:{...t.data,_method:"patch"});function r(n){n.preventDefault(),s.post(route(`product.${t.state=="edit"?"update":"store"}`,t.state=="edit"?t.data.id:void 0),{onSuccess:()=>{s.clearErrors(),s.reset(),a(()=>({state:"create",data:void 0,open:!1}))}})}return e.jsxs("form",{className:"mt-3",onSubmit:r,children:[e.jsx(q,{formProps:s,modalAction:t}),e.jsx(M,{modalAction:t,setModalAction:a,formProps:s})]})}function W({modalAction:t,setModalAction:a}){console.log(t.data);function s(){return t.state=="create"?"Add New Product":t.state=="edit"?"Edit Product":"View Product"}return e.jsx(D,{title:s(),open:t.open,closeModal:()=>a(r=>({...r,open:!1})),children:e.jsx(R,{modalAction:t,setModalAction:a})})}function re({auth:t,products:a,business:{taxPercent:s}}){const r=a.data,[n,i]=h.useState({state:"create",open:!1});return console.log(r),e.jsxs(e.Fragment,{children:[e.jsx(W,{modalAction:n,setModalAction:i}),e.jsxs(w,{user:t.user,header:e.jsx(B,{totalResult:a.total,requestCreateProduct:()=>i({state:"create",open:!0,data:null})}),children:[e.jsx(y,{title:"Inventory"}),e.jsxs("div",{className:"flex flex-wrap  justify-center py-6",children:[r.length==0&&e.jsxs("div",{className:"my-20 flex gap-4 opacity-50",children:[e.jsx(F,{className:"mt-1"}),e.jsx("p",{children:"No products found!"})]}),r.map(o=>e.jsx(C,{product:o,taxPercent:s,requestShow:()=>i({state:"show",open:!0,data:o}),requestEdit:()=>i({state:"edit",data:o,open:!0})},o.id))]}),e.jsx(k,{paginateItems:a})]})]})}export{re as default};
