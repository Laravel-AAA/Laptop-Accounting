import{W as d,r as c,y as h}from"./app-838cb2bb.js";function b(f,S){const r=S===void 0?d(f):d(S,f),[D,g]=c.useState(r.processing),[n,E]=c.useState(JSON.parse(JSON.stringify(f))),[i,l]=c.useState(!1);c.useEffect(()=>{E(r.data)},[r.hasErrors]),c.useEffect(()=>{g(r.processing)},[r.processing]),c.useEffect(()=>{l(r.recentlySuccessful)},[r.recentlySuccessful]);const O=(t,e)=>{r.setData(t,e)},o=t=>{r.setData(t)},J=t=>t?r.data[t]!==n[t]:r.isDirty,N=()=>{const t=JSON.parse(JSON.stringify(r.data));for(let e in t)t[e]===n[e]&&delete t[e];return t};return{...r,setData:O,setAllData:o,isDirty:J,get processing(){return D},setProcessing:t=>g(t),get dirtyData(){return N()},patchDirty:(t,e)=>{const u=JSON.parse(JSON.stringify(r.data));for(let s in u)u[s]===n[s]&&delete u[s];h.patch(t,u,{...e,onSuccess:s=>{var a;l(!0),setTimeout(()=>l(!1),2e3),(a=e==null?void 0:e.onSuccess)==null||a.call(e,s)},onError:s=>{var a;for(let y in s)r.setError(y,s[y]);(a=e==null?void 0:e.onError)==null||a.call(e,s)}})},get recentlySuccessful(){return i}}}export{b as u};
